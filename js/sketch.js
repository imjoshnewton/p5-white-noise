function preload(){ambiance=loadSound("audio/DPadBase.mp3"),vinyl=loadSound("audio/Vinyl.mp3")}function setup(){canv=createCanvas(windowWidth,windowHeight),canv.style("max-height: 900px;"),noStroke(),myFilter=new p5.LowPass,whiteNoise=new p5.Noise,currentNoise="white",whiteNoise.disconnect(),myFilter.process(whiteNoise),myFilter.process(vinyl),whiteNoise.start(),noiseFFT=new p5.FFT,noiseFFT.setInput(myFilter),noiseDivs[0]=new NoiseBox,noiseDivs[0].container.size(width,.6*height),noiseDivs[0].container.position(0,0),noiseDivs[0].container.id("noise-area"),noiseDivs[0].marker.init(.075*noiseDivs[0].container.width,.85*noiseDivs[0].container.height,!0,!0,.045*width),noiseDivs[0].container.touchStarted(function(){noiseDivs[0].hasAction=!0}),noiseDivs[0].container.touchEnded(function(){noiseDivs[0].hasAction=!1}),noiseDivs[1]=new NoiseBox,noiseDivs[1].container.size(width,.1*height),noiseDivs[1].container.position(0,.9*height),noiseDivs[1].container.id("ambiance-volume"),noiseDivs[1].marker.init(.85*noiseDivs[1].container.width,noiseDivs[1].container.position().y+.5*noiseDivs[1].container.height,!0,!1,.045*width),noiseDivs[1].container.touchStarted(function(){noiseDivs[1].hasAction=!0}),noiseDivs[1].container.touchEnded(function(){noiseDivs[1].hasAction=!1}),ambiance.setVolume(map(noiseDivs[1].marker.x,0,noiseDivs[1].container.width,0,1)),ambiance.play(),noiseDivs[2]=new NoiseBox,noiseDivs[2].container.size(width/5,.3*height),noiseDivs[2].container.position(0,.6*height),noiseDivs[2].container.id("all-stop"),noiseDivs[2].hasMarker=!1,noiseDivs[2].container.mousePressed(function(){noiseDivs[2].hasAction?(ambiance.play(),"vinyl"!=currentNoise?whiteNoise.start():vinyl.play()):(ambiance.stop(),"vinyl"!=currentNoise?whiteNoise.stop():vinyl.stop()),noiseDivs[2].toggleAction()}),noiseDivs[3]=new NoiseBox,noiseDivs[3].container.size(width/5,.3*height),noiseDivs[3].container.position(width/5*2,.6*height),noiseDivs[3].container.id("pink-noise"),noiseDivs[3].hasMarker=!1,noiseDivs[3].container.mousePressed(function(){whiteNoise.setType("pink"),noiseDivs[2].hasAction||(whiteNoise.start(),vinyl.stop()),currentNoise="pink"}),noiseDivs[4]=new NoiseBox,noiseDivs[4].container.size(width/5,.3*height),noiseDivs[4].container.position(width/5*1,.6*height),noiseDivs[4].container.id("brown-noise"),noiseDivs[4].hasMarker=!1,noiseDivs[4].container.mousePressed(function(){whiteNoise.setType("brown"),noiseDivs[2].hasAction||(whiteNoise.start(),vinyl.stop()),currentNoise="brown"}),noiseDivs[5]=new NoiseBox,noiseDivs[5].container.size(width/5,.3*height),noiseDivs[5].container.position(width/5*3,.6*height),noiseDivs[5].container.id("white-noise"),noiseDivs[5].hasMarker=!1,noiseDivs[5].container.mousePressed(function(){whiteNoise.setType("white"),noiseDivs[2].hasAction||(whiteNoise.start(),vinyl.stop()),currentNoise="white"}),noiseDivs[6]=new NoiseBox,noiseDivs[6].container.size(width/5,.3*height),noiseDivs[6].container.position(width/5*4,.6*height),noiseDivs[6].container.id("vinyl-noise"),noiseDivs[6].hasMarker=!1,noiseDivs[6].container.mousePressed(function(){noiseDivs[2].hasAction||(whiteNoise.stop(),vinyl.play(),vinyl.loop(35)),currentNoise="vinyl"})}function draw(){background(106),filterFreq=map(noiseDivs[0].marker.x,noiseDivs[0].container.x+noiseDivs[0].marker.diameter/2,noiseDivs[0].container.x+noiseDivs[0].container.width-noiseDivs[0].marker.diameter/2,10,22e3),myFilter.set(filterFreq,filterWidth),whiteNoise.amp(map(noiseDivs[0].marker.y,noiseDivs[0].container.y+noiseDivs[0].marker.diameter/2,noiseDivs[0].container.y+noiseDivs[0].container.height-noiseDivs[0].marker.diameter/2,1,0)),vinyl.amp(map(noiseDivs[0].marker.y,noiseDivs[0].container.y+noiseDivs[0].marker.diameter/2,noiseDivs[0].container.y+noiseDivs[0].container.height-noiseDivs[0].marker.diameter/2,1,0)),ambiance.setVolume(map(noiseDivs[1].marker.x,0,noiseDivs[1].container.width,0,1));var i=noiseFFT.analyze();fill(106,156,154,70);for(var e=0;e<i.length;e++){var n=map(e,0,i.length,noiseDivs[0].container.x,noiseDivs[0].container.x+noiseDivs[0].container.width),s=-noiseDivs[0].container.height+map(i[e],0,255,noiseDivs[0].container.height,noiseDivs[0].container.y);rect(n,noiseDivs[0].container.height,noiseDivs[0].container.width/i.length,s)}for(var e=0;e<noiseDivs.length;e++)noiseDivs[e].handleAction(),noiseDivs[e].show(.045*width)}function windowResizeD(){resizeCanvas(windowWidth,windowWidth)}var noiseFFT,whiteNoise,myFilter,filterFreq,filterWidth,currentNoise,vinyl,ambiance,noiseDivs=[],canv;